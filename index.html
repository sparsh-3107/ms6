<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sparsh ‚ù§Ô∏è Maya - Happy Birthday!</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Gloria+Hallelujah&family=Poppins:wght@300;500&display=swap" rel="stylesheet"/>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: Poppins, sans-serif;
      background: linear-gradient(120deg, #FFECEC, #FFF5F8);
      color: #5A2A3F;
      overflow-x: hidden;
      transition: background .4s, color .4s;
    }
    body.dark {
      background: linear-gradient(120deg, #2C2A36, #3C3A4E);
      color: #E1DAEA;
    }
    #coupleTitle {
      position: fixed; top: 1rem; left: 50%;
      transform: translateX(-50%);
      font-family: 'Great Vibes', cursive;
      font-size: 2.2rem;
      animation: heartbeat 3s infinite;
      z-index: 1001;
    }
    @keyframes heartbeat {
      0%,100% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.04); }
    }

    button {
      font-family: inherit;
      cursor: pointer;
      transition: transform .2s, box-shadow .2s;
    }
    button:hover, button:focus {
      transform: scale(1.03);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .toggle-btn {
      position: fixed; top: 1rem; right: 1rem;
      background: #FF6B6B; color: #fff;
      border: none; padding: .6rem 1rem; border-radius: .6rem;
      box-shadow: 0 0 8px rgba(255,107,107,0.5);
      z-index: 1000;
    }

    .lock-screen {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.3);
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      text-align: center; z-index: 500;
    }
    .lock-screen h2 {
      font-family: 'Great Vibes', cursive;
      font-size: 3rem; color: #E05194;
      margin-bottom: .8rem;
    }
    .lock-screen p {
      font-family: 'Gloria Hallelujah', cursive;
      font-size: 1.2rem;
      margin-bottom: .8rem;
      color: #C44F8B;
    }
    .lock-screen input {
      padding: .6rem; font-size: 1.4rem;
      width: 120px; text-align: center;
      border: 2px solid #E05194;
      border-radius: .5rem;
    }
    .lock-screen button {
      margin-top: 1rem; padding: .8rem 2rem;
      background: linear-gradient(90deg, #FF7E8A, #FF5A7A);
      color: #fff; border:none; border-radius:2rem;
    }
    .lock-screen .error {
      margin-top: .5rem; color: #D02E2E;
      font-size: .9rem; visibility: hidden;
    }

    .slider {
      display: none; flex-direction: column;
      align-items: center;
      padding: 2rem 1rem; min-height: 100vh;
      position: relative;
    }
    .slider.active { display: flex; }

    h1 {
      font-family: 'Great Vibes', cursive;
      font-size: 3rem;
      margin-bottom: .5rem;
      color: #D14F75;
    }
    .quote {
      font-style: italic;
      color: #A02E60;
      text-align: center;
      max-width: 600px;
      margin-bottom: 1.5rem;
    }

    .section {
      display: none;
      flex-direction: column;
      align-items: center;
      text-align: center;
      max-width: 700px;
      margin-bottom: 2rem;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity .6s ease, transform .6s ease;
    }
    .section.active {
      display: flex;
      opacity: 1;
      transform: translateY(0);
    }

    .nav-btn {
      position: fixed; bottom: 1rem;
      padding: .8rem 1.2rem;
      background: #F7A1C4;
      color: #3C2233;
      border: none;
      border-radius: 1rem;
      box-shadow: 0 0 8px rgba(247,161,196,0.5);
      font-family: inherit;
    }
    #prevBtn { left: 1rem; }
    #nextBtn { right: 1rem; }

    .voice-btn {
      margin-top: 1rem;
      padding: .5rem 1.2rem;
      background: #FF9EBF;
      color: #3C2233;
      border: none;
      border-radius: 1rem;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%,100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .reveal-btn {
      margin-top: 2rem;
      padding: 1rem 2rem;
      background: #FF9EBF;
      color: #3C2233;
      border: none;
      border-radius: 1rem;
      animation: pulse 1.8s infinite;
    }

    .scratch-area {
      position: relative;
      width: 80%; max-width: 380px;
      height: 200px;
      background: #EEE;
      border-radius: 1rem;
      margin: 1rem auto;
      overflow: hidden;
    }
    #scratchCanvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      cursor: pointer;
    }
    #scratchMsg {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'Gloria Hallelujah', cursive;
      font-size: 1.1rem;
      text-align: center;
    }

    #polaroidWall {
      display: flex; flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin: 1rem auto;
    }
    .polaroid {
      width: 120px; height: 160px;
      background: #fff;
      padding: .4rem;
      border-radius: .6rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: transform .3s ease, box-shadow .3s;
    }
    .polaroid:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
    }
    .polaroid img {
      width: 100%; height: 100%; object-fit: cover;
      border-radius: .4rem;
    }
    .caption {
      margin-top: .3rem;
      text-align: center;
      font-size: .9rem;
      color: #6A3A51;
    }

    #photoSlideshow {
      position: relative;
      width: 100%; max-width: 500px;
      height: 300px;
      border-radius: 1rem;
      overflow: hidden;
      margin: 1rem auto;
    }
    #photoSlideshow img {
      position: absolute; width: 100%; height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 1s ease;
    }
    #photoSlideshow img.active {
      opacity: 1;
    }
    #photoCaption {
      margin-top: .5rem;
      font-family: 'Gloria Hallelujah', cursive;
      color: #6A3A51;
    }

    .popup {
      position: fixed; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: #FFF;
      color: #5A2A3F;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 0 20px rgba(247,161,196,0.7);
      max-width: 90vw; max-height: 80vh;
      overflow: auto; display: none;
      flex-direction: column; align-items: center;
      z-index: 1002;
    }
    .popup.show { display: flex; }
    body.dark .popup {
      background: #3C3A4E;
      color: #E1DAEA;
      box-shadow: 0 0 25px rgba(122,90,155,0.7);
    }
    .letter-text {
      font-family: 'Gloria Hallelujah', cursive;
      white-space: pre-wrap;
      font-size: 1.3rem;
    }
    .signature {
      margin-top: 1rem;
      font-family: 'Great Vibes', cursive;
      font-size: 2rem;
      opacity: 0;
      animation: candleFlicker 1.2s infinite;
    }
    .popup button {
      margin-top: 1rem;
      padding: .6rem 1.2rem;
      background: #FF9EBF;
      color: #3C2233;
      border: none;
      border-radius: 1rem;
    }

    @keyframes candleFlicker {
      0%,100% { opacity: 1; }
      50% { opacity: .85; }
    }

    #confettiCanvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 999;
    }

    .balloon, .rose, .heart, .sparkle, .snowflake {
      position: fixed; font-size: 1.5rem;
      opacity: 0.9;
      pointer-events: none;
    }
    .balloon { font-size: 2rem; animation: flyUp 10s linear infinite; }
    .rose { animation: flyUp 8s linear infinite; }
    .heart { animation: flyUp 5s linear infinite; color: #E05194; }
    .sparkle { animation: flyUp 4s linear infinite; color: #FFD27F; }
    .snowflake { animation: flyUp 6s linear infinite; color: #CDEBFE; }
    .star {
      position: fixed;
      width: 2px; height: 2px;
      background: #FFF;
      border-radius: 50%;
      box-shadow: 0 0 6px #FFF;
      animation: starTwinkle 2s ease-in-out infinite;
    }
    @keyframes flyUp {
      0% { transform: translateY(0); }
      100% { transform: translateY(-120vh); opacity: 0; }
    }
    @keyframes starTwinkle {
      0%,100% { opacity: 0; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body>

  <div id="coupleTitle">Sparsh ‚ù§Ô∏è Maya</div>
  <button class="toggle-btn">üåì Toggle Theme</button>
  <audio id="bgMusic" loop preload="auto" src="https://cdn.pixabay.com/download/audio/2023/03/06/audio_f2119a6a1c.mp3"></audio>

  <div class="lock-screen">
    <h2>üîí Secret Gateway</h2>
    <p>Enter the code to unlock my heart üíï</p>
    <input id="codeInput" maxlength="3" placeholder="üíóüíóüíó" />
    <button onclick="checkCode()">‚ù§Ô∏è Unlock</button>
    <p class="error">‚ùå Wrong code!</p>
  </div>

  <div class="slider">
    <h1>Happy Birthday Maya üéâ</h1>
    <p class="quote">"You make the world brighter just by being in it."</p>

    <!-- Text Slides -->
    <div class="section active">üéÇ Today, the world celebrates YOU‚Äîmy sunshine, my joy.</div>
    <div class="section">üåå Your beauty is rivaled only by the wonders of your soul.</div>
    <div class="section">üåü My life began to glow the moment you appeared in it.</div>
    <div class="section">üé∂ Your laughter is my favorite melody. ‚ù§Ô∏è</div>
    <div class="section">ü¶ã In your grace, I find my peace every single day.</div>

    <!-- Voice Slide -->
    <div class="section">
      <p>üîä Tap to hear my voice</p>
      <p>I love you beyond time, beyond everything üíï</p>
      <button id="voiceBtn" class="voice-btn">‚ñ∂Ô∏è Play Voice</button>
      <audio id="voiceMsg" src="YOUR_VOICE_MESSAGE.mp3"></audio>
    </div>

    <!-- Scratch Card -->
    <div class="section">
      <p>üéÅ Scratch to reveal your surprise:</p>
      <div class="scratch-area">
        <canvas id="scratchCanvas"></canvas>
        <div id="scratchMsg">You make my world magical üíñ</div>
      </div>
    </div>

    <!-- Polaroid Wall -->
    <div class="section">
      <p>üéûÔ∏è Precious moments together:</p>
      <div id="polaroidWall">
        <div class="polaroid"><img src="https://via.placeholder.com/120x160"/><div class="caption">You & Me</div></div>
        <div class="polaroid"><img src="https://via.placeholder.com/120x160"/><div class="caption">Laugh Forever</div></div>
        <div class="polaroid"><img src="https://via.placeholder.com/120x160"/><div class="caption">Best Hug Ever</div></div>
      </div>
    </div>

    <!-- Photo Slideshow -->
    <div class="section">
      <p>üì∏ Cherished memories:</p>
      <div id="photoSlideshow">
        <img src="https://via.placeholder.com/500x300" class="active"/>
        <img src="https://via.placeholder.com/500x300/ffcccc"/>
        <img src="https://via.placeholder.com/500x300/ffd1dc"/>
      </div>
      <div id="photoCaption">Our Trip üåÑ</div>
    </div>

    <!-- Love Letter -->
    <div class="section">
      <p>Forever yours,<br/><strong>sparsh</strong> üíå</p>
      <button class="reveal-btn" onclick="showPopup()">üíå Reveal Love Letter</button>
    </div>

    <button id="prevBtn" class="nav-btn">‚¨ÖÔ∏è Prev</button>
    <button id="nextBtn" class="nav-btn">Next ‚û°Ô∏è</button>
    <div class="footer">¬© 2025 Made with ‚ù§Ô∏è by Sparsh</div>
  </div>

  <div class="popup">
    <div class="letter-text"></div>
    <span class="signature">‚Äî sparsh üíå</span>
    <button onclick="hidePopup()">Close</button>
  </div>

  <canvas id="confettiCanvas"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script>
    const lock = document.querySelector('.lock-screen'),
          slider = document.querySelector('.slider'),
          sections = slider.querySelectorAll('.section'),
          prevBtn = document.getElementById('prevBtn'),
          nextBtn = document.getElementById('nextBtn'),
          codeInput = document.getElementById('codeInput'),
          err = lock.querySelector('.error'),
          bgMusic = document.getElementById('bgMusic'),
          voiceMsg = document.getElementById('voiceMsg'),
          voiceBtn = document.getElementById('voiceBtn'),
          popup = document.querySelector('.popup'),
          letterText = popup.querySelector('.letter-text'),
          signature = popup.querySelector('.signature'),
          ctx = document.getElementById('scratchCanvas').getContext('2d'),
          slideshowImgs = document.querySelectorAll('#photoSlideshow img'),
          photoCaption = document.getElementById('photoCaption');

    let currentIndex = 0, slideShowIndex = 0;

    function showSlide(i) {
      currentIndex = i;
      sections.forEach((s, idx) => {
        s.classList.toggle('active', idx === i);
      });
      prevBtn.disabled = i === 0;
      nextBtn.disabled = i === sections.length - 1;
    }

    window.checkCode = function() {
      if (codeInput.value.trim() === '143') {
        lock.style.display = 'none';
        slider.classList.add('active');
        bgMusic.play().catch(() => {});
        showSlide(0);
        spawnBalloons();
        spawnRoses();
        spawnStars();
      } else {
        err.style.visibility = 'visible';
      }
    };

    prevBtn.onclick = () => showSlide(currentIndex - 1);
    nextBtn.onclick = () => showSlide(currentIndex + 1);

    document.addEventListener('keydown', e => {
      if (!slider.classList.contains('active')) {
        if (e.key === 'Enter') checkCode();
        return;
      }
      if (e.key === 'ArrowRight') nextBtn.click();
      if (e.key === 'ArrowLeft') prevBtn.click();
      if (e.key === 'Escape' && popup.classList.contains('show')) hidePopup();
    });

    document.querySelector('.toggle-btn').onclick = () => {
      document.body.classList.toggle('dark');
      localStorage.setItem('darkMode', document.body.classList.contains('dark'));
    };
    window.onload = () => {
      if (localStorage.getItem('darkMode') === 'true') {
        document.body.classList.add('dark');
      }
    };

    function spawnBalloons() {
      for (let i = 0; i < 6; i++) {
        const b = document.createElement('div');
        b.className = 'balloon';
        b.textContent = 'üéà';
        b.style.left = Math.random() * 90 + 'vw';
        b.style.animationDuration = (7 + Math.random() * 3) + 's';
        document.body.appendChild(b);
        b.addEventListener('animationend', () => b.remove());
      }
      setTimeout(spawnBalloons, 9000);
    }

    function spawnRoses() {
      for (let i = 0; i < 5; i++) {
        const r = document.createElement('div');
        r.className = 'rose';
        r.textContent = 'üåπ';
        r.style.left = Math.random() * 90 + 'vw';
        r.style.animationDuration = (6 + Math.random() * 2) + 's';
        document.body.appendChild(r);
        r.addEventListener('animationend', () => r.remove());
      }
      setTimeout(spawnRoses, 8000);
    }

    function spawnStars() {
      if (!document.body.classList.contains('dark')) return;
      const s = document.createElement('div');
      s.className = 'star';
      s.style.top = Math.random() * 50 + '%';
      s.style.left = Math.random() * 100 + 'vw';
      document.body.appendChild(s);
      s.addEventListener('animationend', () => s.remove());
      setTimeout(spawnStars, 2000);
    }

    setInterval(() => {
      const heart = document.createElement('div');
      heart.className = 'heart'; heart.textContent = 'üíñ'; heart.style.left = Math.random() * 100 + 'vw';
      document.body.appendChild(heart);
      heart.addEventListener('animationend', () => heart.remove());
    }, 1400);

    setInterval(() => {
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle'; sparkle.textContent = '‚ú®'; sparkle.style.left = Math.random() * 100 + 'vw';
      document.body.appendChild(sparkle);
      sparkle.addEventListener('animationend', () => sparkle.remove());
    }, 1800);

    setInterval(() => {
      const snow = document.createElement('div');
      snow.className = 'snowflake'; snow.textContent = '‚ùÑÔ∏è'; snow.style.left = Math.random() * 100 + 'vw';
      document.body.appendChild(snow);
      snow.addEventListener('animationend', () => snow.remove());
    }, 2000);

    voiceBtn.onclick = () => {
      if (voiceMsg.paused) {
        voiceMsg.play();
        bgMusic.pause();
        voiceBtn.textContent = '‚è∏Ô∏è Pause Voice';
      } else {
        voiceMsg.pause();
        bgMusic.play();
        voiceBtn.textContent = '‚ñ∂Ô∏è Play Voice';
      }
    };
    voiceMsg.onended = () => {
      bgMusic.play();
      voiceBtn.textContent = '‚ñ∂Ô∏è Play Voice';
    };

    const canvas = document.getElementById('scratchCanvas');
    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;
    const ictx = context = canvas.getContext('2d');
    ictx.fillStyle = '#DDD';
    ictx.fillRect(0, 0, canvas.width, canvas.height);
    ictx.globalCompositeOperation = 'destination-out';
    let isScratching = false;
    canvas.onpointerdown = () => isScratching = true;
    canvas.onpointerup = () => isScratching = false;
    canvas.onpointermove = e => {
      if (!isScratching) return;
      const rect = canvas.getBoundingClientRect();
      ictx.beginPath();
      ictx.arc(e.clientX - rect.left, e.clientY - rect.top, 25, 0, 2 * Math.PI);
      ictx.fill();
    };

    slideshowImgs.forEach(img => img.style.opacity = 0);
    slideshowImgs[0].style.opacity = 1;
    setInterval(() => {
      slideshowImgs[slideShowIndex].style.opacity = 0;
      slideShowIndex = (slideShowIndex + 1) % slideshowImgs.length;
      slideshowImgs[slideShowIndex].style.opacity = 1;
      const captions = ['Our Trip üåÑ', 'Your Smile ‚ù§Ô∏è', 'Forever Us'];
      photoCaption.textContent = captions[slideShowIndex];
    }, 4000);

    window.showPopup = () => {
      slider.classList.remove('active');
      popup.classList.add('show');
      bgMusic.pause();
      letterText.textContent = '';
      signature.style.opacity = 0;
      const msg = `Dear Maya,\n\nYour love is the light of my life...\nI promise to cherish you always. üíñ`;
      let i = 0;
      (function type() {
        if (i < msg.length) {
          letterText.textContent += msg[i++];
          setTimeout(type, 40);
        } else {
          signature.style.opacity = 1;
          confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 } });
        }
      })();
    };

    window.hidePopup = () => {
      popup.classList.remove('show');
      slider.classList.add('active');
      bgMusic.play();
    };
  </script>
</body>
</html>
